<!DOCTYPE html>
<html>
<p id="debug"></p>

<!-- Vertex Shader -->
<script id="vertex-shader" type="x-shader/x-vertex">#version 300 es
    in vec4 vPosition; 
    in vec3 a_normal;
    uniform mat4 MVP; // Resource calls it u_worldViewProjection
    uniform mat4 u_worldInverseTranspose;
    out vec3 v_normal;
    uniform vec3 u_lightWorldPosition;
    uniform mat4 u_world;
    out vec3 v_surfaceToLight;

    void main() {
        
            gl_Position =  MVP * vPosition;
            v_normal = mat3(u_worldInverseTranspose) * a_normal;
            // compute the world position of the surface
            vec3 surfaceWorldPosition = (u_world * vPosition).xyz;
 
            // compute the vector of the surface to the light
            // and pass it to the fragment shader
            v_surfaceToLight = u_lightWorldPosition - surfaceWorldPosition;
    }
</script>


<!-- Fragment Shader -->
<script id="fragment-shader" type="x-shader/x-fragment">#version 300 es
    precision highp float;
    in vec3 v_normal;

    uniform vec4 vColor;
    out vec4 outColor;
    in vec3 v_surfaceToLight;

    void main() {
        vec3 normal = normalize(v_normal);
        vec3 surfaceToLightDirection = normalize(v_surfaceToLight);

        float light = dot(v_normal, surfaceToLightDirection);

        outColor = vColor;

        outColor.rgb *= light;
    }
</script>



<script type="text/javascript" src="Common/webgl-utils.js"></script>
<script type="text/javascript" src="Common/initShaders.js"></script>
<script type="text/javascript" src="Common/MV.js"></script>
<script type="text/javascript" src="cow.js"></script>
<script type="text/javascript" src="shadingCow.js"></script>

<!-- <link rel="stylesheet" href="style.css"> -->


<body>
<canvas id="gl-canvas" width="512" height="512"> 
Oops ... your browser doesn't support the HTML5 canvas element
</canvas>
</body>
</html>
